<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="./assets/index.css">
    <title>Document</title>
</head>
<body>
    <div class="cotainer">
        <h1>Time Sheet Calcultar</h1>
        <div class="row my-2" id="main">
            <div class="col-2 main">Day</div>
            <div class="col-3 main">Starting Time</div>
            <div class="col-3 main">Ending Time</div>
            <div class="col-2 main">Break Detuction</div>
            <div class="col-2 main"> Total</div>
        </div>
        <div class="row my-2">
            <div class="col-2">Monday</div>
            <div class="col-3"><input type="text" class="num" id="input1" value="8"/>:<input type="text" class="num" id="input2" value="00"/>
                <select class="select" id="select1">
                    <option selected>AM</option>
                    <option>PM</option>
                </select>
            </div>
            <div class="col-3"><input type="number" class="num" id="input3" value="5"/>:<input type="text" class="num" id="input4" value="00"/>
                <select class="select" id="select2">
                    <option >AM</option>
                    <option selected>PM</option>
                    </select>
            </div>
            <div class="col-2"><input type="number" class="num" id="input5" value="2"/>:<input type="text" class="num" id="input6" value="00"/></div>
            <div class="col-2" id="total1"></div>
        </div>
        <div class="row my-2">
            <div class="col-2">Tuesday</div>
            <div class="col-3"><input type="number" class="num" id="input7" value="8"/>:<input type="text" class="num" id="input8" value="00"/>
            <select class="select" id="select3">
                <option selected>AM</option>
                    <option >PM</option>
                    </select>
            </div>
            <div class="col-3"><input type="number" class="num" id="input9" value="6"/>:<input type="text" class="num" id="input10" value="00"/>
                <select class="select" id="select4">
                    <option >AM</option>
                    <option selected>PM</option>
                    </select>
            </div>
            <div class="col-2"><input type="number" class="num" id="input11" value="4"/>:<input type="text" class="num" id="input12" value="00"/>
            </div>
            <div class="col-2" id="total2"></div>
        </div>
        <div class="row my-2">
            <div class="col-2">Wednesday</div>
            <div class="col-3"><input type="number" class="num" id="input13" value="8"/>:<input type="text" class="num" id="input14" value="00"/>
                <select class="select" id="select5">
                    <option selected>AM</option>
                    <option>PM</option>
                    </select>
            </div>
            <div class="col-3"><input type="number" class="num" id="input15" value="7"/>:<input type="text" class="num" id="input16" value="00"/>
                <select class="select" id="select6">
                    <option >AM</option>
                    <option selected>PM</option>
                    </select>
            </div>
            <div class="col-2"><input type="number" class="num" id="input17" value="5"/>:<input type="text" class="num" id="input18" value="00"/></div>
            <div class="col-2" id="total3"> </div>
        </div>
        <div class="row my-2">
            <div class="col-2">Thursday</div>
            <div class="col-3"><input type="number" class="num" id="input19" value="8"/>:<input type="text" class="num" id="input20" value="00"/>
                <select class="select" id="select7">
                    <option selected>AM</option>
                    <option>PM</option>
                    </select>
            </div>
            <div class="col-3"><input type="number" class="num" id="input21" value="8"/>:<input type="text" class="num" id="input22" value="8"/>
                <select class="select" id="select8">
                    <option >AM</option>
                    <option selected>PM</option>
                    </select>
            </div>
            <div class="col-2"><input type="number" class="num" id="input23" value="1"/>:<input type="text" class="num" id="input24" value="00"/></div>
            <div class="col-2" id="total4"> </div>
        </div>
        <div class="row my-2">
            <div class="col-2">Friday</div>
            <div class="col-3"><input type="number" class="num" id="input25" value="8"/>:<input type="text" class="num" id="input26" value="00"/>
                <select class="select" id="select9">
                    <option selected>AM</option>
                    <option>PM</option>
                </select>
            </div>
            <div class="col-3"><input type="number" class="num" id="input27" value="9"/>:<input type="text" class="num" id="input28" value="00"/>
                <select class="select" id="select10">
                    <option >AM</option>
                    <option selected>PM</option>
                    </select>
            </div>
            <div class="col-2"><input type="number" class="num" id="input29" value="2"/>:<input type="text" class="num" id="input30" value="00"/></div>
            <div class="col-2" id="total5"> </div>
        </div>
        <div class="row my-2">
            <div class="col-2">Saturday</div>
            <div class="col-3"><input type="number" class="num" id="input31" value="8"/>:<input type="text" class="num" id="input32" value="00"/>
                <select class="select" id="select11">
                    <option selected>AM</option>
                    <option>PM</option>
                    </select>
            </div>
            <div class="col-3"><input type="number" class="num" id="input33" value="10"/>:<input type="text" class="num" id="input34" value="00"/>
                <select class="select" id="select12">
                    <option>AM</option>
                    <option selected>PM</option>
                    </select>
            </div>
            <div class="col-2"><input type="number" class="num" id="input35" value="3"/>:<input type="text" class="num" id="input36" value="00"/></div>
            <div class="col-2" id="total6"> </div>
        </div>
        <div class="row">
            <div class="col-2">Sunday</div>
            <div class="col-3"><input type="number" class="num" id="input37" value="8"/>:<input type="text" class="num" id="input38" value="00"/>
                <select class="select" id="select13">
                    <option selected>AM</option>
                    <option>PM</option>
                    </select>
            </div>
            <div class="col-3"><input type="number" class="num" id="input39" value="11"/>:<input type="text" class="num" id="input40" value="00"/>
                <select class="select" id="select14">
                    <option >AM</option>
                    <option selected>PM</option>
                    </select>
            </div>
            <div class="col-2"><input type="number" class="num" id="input41" value="4"/>:<input type="text" class="num" id="input42" value="00"/></div>
            <div class="col-2"id="total7"> </div>
        </div>
        <div class="row mycolor">
            <div class="col-3 cole6-left"><p>CodeBeautify</p></div>
            <div class="col-3 cole6-right"><h1>Total Hours:</h1></div>
            <h1><div class="col-3" id="finalValue"></div></h1>
        </div>
        <button type="button" class="btn btn-primary btn-lg my-4" onclick="Calculate()">CALCULATE</button>
        <button type="button" class="btn btn-secondary btn-lg my-4" onclick="Reset()">CLEAR ALL</button>
    </div>

    <script>
        function Reset(){
            for(let i = 1; i < 43; i++){
                let idName = "input"+ i;
                //alert(idName)
                document.getElementById(idName).value = '';
                if(i < 8){
                    document.getElementById("total" + i).innerHTML = '';
                }
            }
            document.getElementById("finalValue").innerHTML = ''
        }
        function Calculate(){

            let finalHr = 0;
                let finalMin = 0

            for(let i = 0; i < 7; i++){
                
                let totalHr = 0;
                let totalMin = 0;
                
                let starthrId = "input" + (1 + 6*i);
                let startMinId = "input" + (2 + 6*i);
                let endHrId = "input" + (3 + 6*i);
                let endMinId = "input" + (4 + 6*i);
                let breakHrId = "input"+ (5 + 6*i);
                let breakMinId = "input" + (6 + 6*i);
                let totalId = "total" + (i + 1);

                let select1Id = "select" +(2*i+ 1);
                let select2Id = "select" + (2*i + 2);

                // console.log("startHrId : " + starthrId + " endHrId : " + endHrId + " startMinId : " + startMinId +  " endMinId : " +
                //     endMinId + " breakHrId : "+ breakHrId + " breakMinId "+ breakMinId + " total id : "+ totalId);
                
                let startHr = Number(document.getElementById(starthrId).value ?? 0);
                let startMin = Number(document.getElementById(startMinId).value ?? 0);
                let endHr = Number(document.getElementById(endHrId).value ?? 0);
                let endMin = Number(document.getElementById(endMinId).value ?? 0);
                let breakHr = Number(document.getElementById(breakHrId).value ?? 0);
                let breakMin = Number(document.getElementById(breakMinId).value ?? 0);
                let select1Value = document.getElementById(select1Id).value ?? '';
                let select2Value = document.getElementById(select2Id).value ?? '';

                if(startHr < 0 || startMin < 0 || endHr < 0 || endMin < 0 || breakHr < 0 || breakMin < 0){
                    alert("Please enter a +ve and valid number : ")
                    document.getElementById(totalId).innerHTML = 0;
                    break;
                }

                if(select1Value == select2Value && startHr > endHr){
                        alert("Start Time should be less than End Time");
                        document.getElementById(totalId).innerHTML = 0;
                        break;
                }
                if(startHr == '' && startMin == '' && endHr == '' && endMin == '' && breakHr == '' && breakMin == ''){
                    continue;
                }

                // console.log("startHr : "+ startHr +  " startMin : "+ startMin + " endHr : "+ endHr+  " endMin : "+ endMin+
                //  " breakHr :" + breakHr +  " breakMin : "+ breakMin)
                

                if(select1Value != select2Value){
                    
                    endHr = endHr + 12;
                }
                else{

                } 
                // minute part  and hr part
                if(startMin > endMin){
                    totalMin = endMin + 60 - startMin;
                    endHr = endHr - 1;
                }
                else{
                    totalMin = endMin - startMin;
                }

                if(startHr > endHr){
                    totalHr = endHr + 12 - startHr;
                }
                else{
                    totalHr = endHr - startHr;
                }
                
                // break time should not be greater than total time
                
                // total min/hr to break
                if(totalMin < breakMin){
                    totalMin = totalMin + 60 - breakMin;
                    totalHr = totalHr - 1;
                }
                else{
                    totalMin = totalMin - breakMin;
                }
                totalHr = totalHr - breakHr;

                if(totalMin > 60 ){
                    totalHr = totalHr + totalMin / 60;
                    totalMin = totalMin % 60;
                }
                if(totalHr <= 0){
                    alert('break time should be less that different of start time and end time');
                    document.getElementById(totalId).innerHTML = 0;
                    document.getElementById(breakHrId).value = 0;
                    break;
                }
                let displayTotalValue = totalHr + ':' + totalMin;
                // console.log('total hr : '+ totalHr + " total min : " + totalMin);
                // console.log('display value ' + displayTotalValue);
                //document.getElementById(totalId).value = displayTotalValue;
                document.getElementById(totalId).innerHTML = displayTotalValue;
                finalHr = finalHr + totalHr;
                finalMin = finalMin + totalMin;

            }
            if(finalMin > 60 ){
                    finalHr = finalHr + finalMin / 60;
                    finalMin = finalMin % 60;
                }
            let displayFinalValue = Math.round(finalHr) + ':'+ Math.round(finalMin);
            //document.getElementById("finalValue").value = displayFinalValue;
            document.getElementById("finalValue").innerHTML = displayFinalValue;
        }

    </script>

</body>
</html>